ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"CAN.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.CAN_IC_READ_REGISTER,"ax",%progbits
  18              		.align	1
  19              		.global	CAN_IC_READ_REGISTER
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	CAN_IC_READ_REGISTER:
  25              	.LVL0:
  26              	.LFB76:
  27              		.file 1 "Core/Src/CAN.c"
   1:Core/Src/CAN.c **** #include "CAN.h"
   2:Core/Src/CAN.c **** 
   3:Core/Src/CAN.c **** /**
   4:Core/Src/CAN.c ****  * @brief write to registry in CAN IC
   5:Core/Src/CAN.c ****  * @param address: hex address of the register
   6:Core/Src/CAN.c ****  * 		  value: value to be written to the register
   7:Core/Src/CAN.c ****  * @retval None
   8:Core/Src/CAN.c ****  */
   9:Core/Src/CAN.c **** void CAN_IC_READ_REGISTER(uint8_t address, uint8_t* buffer)
  10:Core/Src/CAN.c **** {
  28              		.loc 1 10 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 10 1 is_stmt 0 view .LVU1
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 82B0     		sub	sp, sp, #8
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 24
  43 0004 0C46     		mov	r4, r1
  11:Core/Src/CAN.c **** 	uint8_t packet[3] = {0x03, address};
  44              		.loc 1 11 2 is_stmt 1 view .LVU2
  45              		.loc 1 11 10 is_stmt 0 view .LVU3
  46 0006 0022     		movs	r2, #0
  47 0008 ADF80420 		strh	r2, [sp, #4]	@ movhi
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 2


  48 000c 8DF80620 		strb	r2, [sp, #6]
  49 0010 0323     		movs	r3, #3
  50 0012 8DF80430 		strb	r3, [sp, #4]
  51 0016 8DF80500 		strb	r0, [sp, #5]
  12:Core/Src/CAN.c **** 
  13:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET); //set CS pin low
  52              		.loc 1 13 2 is_stmt 1 view .LVU4
  53 001a 0C4D     		ldr	r5, .L3
  54 001c 1021     		movs	r1, #16
  55              	.LVL1:
  56              		.loc 1 13 2 is_stmt 0 view .LVU5
  57 001e 2846     		mov	r0, r5
  58              	.LVL2:
  59              		.loc 1 13 2 view .LVU6
  60 0020 FFF7FEFF 		bl	HAL_GPIO_WritePin
  61              	.LVL3:
  14:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, packet, 2, 100U); //transmit
  62              		.loc 1 14 2 is_stmt 1 view .LVU7
  63 0024 0A4E     		ldr	r6, .L3+4
  64 0026 6423     		movs	r3, #100
  65 0028 0222     		movs	r2, #2
  66 002a 01A9     		add	r1, sp, #4
  67 002c 3046     		mov	r0, r6
  68 002e FFF7FEFF 		bl	HAL_SPI_Transmit
  69              	.LVL4:
  15:Core/Src/CAN.c **** 	HAL_SPI_Receive(&hspi1, buffer, 1, 100U); //receive register contents
  70              		.loc 1 15 2 view .LVU8
  71 0032 6423     		movs	r3, #100
  72 0034 0122     		movs	r2, #1
  73 0036 2146     		mov	r1, r4
  74 0038 3046     		mov	r0, r6
  75 003a FFF7FEFF 		bl	HAL_SPI_Receive
  76              	.LVL5:
  16:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET); //set CS pin high
  77              		.loc 1 16 2 view .LVU9
  78 003e 0122     		movs	r2, #1
  79 0040 1021     		movs	r1, #16
  80 0042 2846     		mov	r0, r5
  81 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
  82              	.LVL6:
  17:Core/Src/CAN.c **** }
  83              		.loc 1 17 1 is_stmt 0 view .LVU10
  84 0048 02B0     		add	sp, sp, #8
  85              	.LCFI2:
  86              		.cfi_def_cfa_offset 16
  87              		@ sp needed
  88 004a 70BD     		pop	{r4, r5, r6, pc}
  89              	.LVL7:
  90              	.L4:
  91              		.loc 1 17 1 view .LVU11
  92              		.align	2
  93              	.L3:
  94 004c 00000240 		.word	1073872896
  95 0050 00000000 		.word	hspi1
  96              		.cfi_endproc
  97              	.LFE76:
  99              		.section	.text.CAN_IC_WRITE_REGISTER_BITWISE,"ax",%progbits
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 3


 100              		.align	1
 101              		.global	CAN_IC_WRITE_REGISTER_BITWISE
 102              		.syntax unified
 103              		.thumb
 104              		.thumb_func
 106              	CAN_IC_WRITE_REGISTER_BITWISE:
 107              	.LVL8:
 108              	.LFB77:
  18:Core/Src/CAN.c **** 
  19:Core/Src/CAN.c **** /**
  20:Core/Src/CAN.c ****  * @brief write to a spicific series of bits in a register in CAN IC
  21:Core/Src/CAN.c ****  * @param address: hex address of the register
  22:Core/Src/CAN.c ****  * 		  mask: bit mask
  23:Core/Src/CAN.c ****  * 		  value: value to be written to the register
  24:Core/Src/CAN.c ****  * @retval None
  25:Core/Src/CAN.c ****  */
  26:Core/Src/CAN.c **** void CAN_IC_WRITE_REGISTER_BITWISE(uint8_t address, uint8_t mask, uint8_t value)
  27:Core/Src/CAN.c **** {
 109              		.loc 1 27 1 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 8
 112              		@ frame_needed = 0, uses_anonymous_args = 0
 113              		.loc 1 27 1 is_stmt 0 view .LVU13
 114 0000 10B5     		push	{r4, lr}
 115              	.LCFI3:
 116              		.cfi_def_cfa_offset 8
 117              		.cfi_offset 4, -8
 118              		.cfi_offset 14, -4
 119 0002 82B0     		sub	sp, sp, #8
 120              	.LCFI4:
 121              		.cfi_def_cfa_offset 16
  28:Core/Src/CAN.c **** 	uint8_t packet[4] = {0x05, address, mask, value};
 122              		.loc 1 28 2 is_stmt 1 view .LVU14
 123              		.loc 1 28 10 is_stmt 0 view .LVU15
 124 0004 0523     		movs	r3, #5
 125 0006 8DF80430 		strb	r3, [sp, #4]
 126 000a 8DF80500 		strb	r0, [sp, #5]
 127 000e 8DF80610 		strb	r1, [sp, #6]
 128 0012 8DF80720 		strb	r2, [sp, #7]
  29:Core/Src/CAN.c **** 
  30:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET); //set CS pin low
 129              		.loc 1 30 2 is_stmt 1 view .LVU16
 130 0016 0A4C     		ldr	r4, .L7
 131 0018 0022     		movs	r2, #0
 132              	.LVL9:
 133              		.loc 1 30 2 is_stmt 0 view .LVU17
 134 001a 1021     		movs	r1, #16
 135              	.LVL10:
 136              		.loc 1 30 2 view .LVU18
 137 001c 2046     		mov	r0, r4
 138              	.LVL11:
 139              		.loc 1 30 2 view .LVU19
 140 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 141              	.LVL12:
  31:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, packet, 4, 100U); //transmit
 142              		.loc 1 31 2 is_stmt 1 view .LVU20
 143 0022 6423     		movs	r3, #100
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 4


 144 0024 0422     		movs	r2, #4
 145 0026 0DEB0201 		add	r1, sp, r2
 146 002a 0648     		ldr	r0, .L7+4
 147 002c FFF7FEFF 		bl	HAL_SPI_Transmit
 148              	.LVL13:
  32:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET); //set CS pin high
 149              		.loc 1 32 2 view .LVU21
 150 0030 0122     		movs	r2, #1
 151 0032 1021     		movs	r1, #16
 152 0034 2046     		mov	r0, r4
 153 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 154              	.LVL14:
  33:Core/Src/CAN.c **** }
 155              		.loc 1 33 1 is_stmt 0 view .LVU22
 156 003a 02B0     		add	sp, sp, #8
 157              	.LCFI5:
 158              		.cfi_def_cfa_offset 8
 159              		@ sp needed
 160 003c 10BD     		pop	{r4, pc}
 161              	.L8:
 162 003e 00BF     		.align	2
 163              	.L7:
 164 0040 00000240 		.word	1073872896
 165 0044 00000000 		.word	hspi1
 166              		.cfi_endproc
 167              	.LFE77:
 169              		.section	.text.CAN_IC_WRITE_REGISTER,"ax",%progbits
 170              		.align	1
 171              		.global	CAN_IC_WRITE_REGISTER
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 176              	CAN_IC_WRITE_REGISTER:
 177              	.LVL15:
 178              	.LFB78:
  34:Core/Src/CAN.c **** 
  35:Core/Src/CAN.c **** /**
  36:Core/Src/CAN.c ****  * @brief write to registry in CAN IC
  37:Core/Src/CAN.c ****  * @param address: hex address of the register
  38:Core/Src/CAN.c ****  * 		  value: value to be written to the register
  39:Core/Src/CAN.c ****  * @retval None
  40:Core/Src/CAN.c ****  */
  41:Core/Src/CAN.c **** void CAN_IC_WRITE_REGISTER(uint8_t address, uint8_t value)
  42:Core/Src/CAN.c **** {
 179              		.loc 1 42 1 is_stmt 1 view -0
 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 8
 182              		@ frame_needed = 0, uses_anonymous_args = 0
 183              		.loc 1 42 1 is_stmt 0 view .LVU24
 184 0000 10B5     		push	{r4, lr}
 185              	.LCFI6:
 186              		.cfi_def_cfa_offset 8
 187              		.cfi_offset 4, -8
 188              		.cfi_offset 14, -4
 189 0002 82B0     		sub	sp, sp, #8
 190              	.LCFI7:
 191              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 5


  43:Core/Src/CAN.c **** 	uint8_t packet[3] = {0x02, address, value};
 192              		.loc 1 43 2 is_stmt 1 view .LVU25
 193              		.loc 1 43 10 is_stmt 0 view .LVU26
 194 0004 0223     		movs	r3, #2
 195 0006 8DF80430 		strb	r3, [sp, #4]
 196 000a 8DF80500 		strb	r0, [sp, #5]
 197 000e 8DF80610 		strb	r1, [sp, #6]
  44:Core/Src/CAN.c **** 
  45:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET); //set CS pin low
 198              		.loc 1 45 2 is_stmt 1 view .LVU27
 199 0012 094C     		ldr	r4, .L11
 200 0014 0022     		movs	r2, #0
 201 0016 1021     		movs	r1, #16
 202              	.LVL16:
 203              		.loc 1 45 2 is_stmt 0 view .LVU28
 204 0018 2046     		mov	r0, r4
 205              	.LVL17:
 206              		.loc 1 45 2 view .LVU29
 207 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 208              	.LVL18:
  46:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, packet, 3, 100U);	//transmit
 209              		.loc 1 46 2 is_stmt 1 view .LVU30
 210 001e 6423     		movs	r3, #100
 211 0020 0322     		movs	r2, #3
 212 0022 01A9     		add	r1, sp, #4
 213 0024 0548     		ldr	r0, .L11+4
 214 0026 FFF7FEFF 		bl	HAL_SPI_Transmit
 215              	.LVL19:
  47:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET); //set CS pin high
 216              		.loc 1 47 2 view .LVU31
 217 002a 0122     		movs	r2, #1
 218 002c 1021     		movs	r1, #16
 219 002e 2046     		mov	r0, r4
 220 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
 221              	.LVL20:
  48:Core/Src/CAN.c **** }
 222              		.loc 1 48 1 is_stmt 0 view .LVU32
 223 0034 02B0     		add	sp, sp, #8
 224              	.LCFI8:
 225              		.cfi_def_cfa_offset 8
 226              		@ sp needed
 227 0036 10BD     		pop	{r4, pc}
 228              	.L12:
 229              		.align	2
 230              	.L11:
 231 0038 00000240 		.word	1073872896
 232 003c 00000000 		.word	hspi1
 233              		.cfi_endproc
 234              	.LFE78:
 236              		.section	.text.ConfigureCANSPI,"ax",%progbits
 237              		.align	1
 238              		.global	ConfigureCANSPI
 239              		.syntax unified
 240              		.thumb
 241              		.thumb_func
 243              	ConfigureCANSPI:
 244              	.LFB79:
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 6


  49:Core/Src/CAN.c **** 
  50:Core/Src/CAN.c **** /**
  51:Core/Src/CAN.c ****   * @brief configure CAN IC through SPI
  52:Core/Src/CAN.c ****   * @param None
  53:Core/Src/CAN.c ****   * @retval None
  54:Core/Src/CAN.c ****   * Configuration is as close to Elysia's CAN configuration whenever possible
  55:Core/Src/CAN.c ****   * TODO: add configuration verification and return value accordingly
  56:Core/Src/CAN.c ****   */
  57:Core/Src/CAN.c **** void ConfigureCANSPI(void)
  58:Core/Src/CAN.c **** {
 245              		.loc 1 58 1 is_stmt 1 view -0
 246              		.cfi_startproc
 247              		@ args = 0, pretend = 0, frame = 8
 248              		@ frame_needed = 0, uses_anonymous_args = 0
 249 0000 10B5     		push	{r4, lr}
 250              	.LCFI9:
 251              		.cfi_def_cfa_offset 8
 252              		.cfi_offset 4, -8
 253              		.cfi_offset 14, -4
 254 0002 82B0     		sub	sp, sp, #8
 255              	.LCFI10:
 256              		.cfi_def_cfa_offset 16
  59:Core/Src/CAN.c **** 	uint8_t resetCommand = 0xa0; //instruction to reset IC to default
 257              		.loc 1 59 2 view .LVU34
 258              		.loc 1 59 10 is_stmt 0 view .LVU35
 259 0004 A023     		movs	r3, #160
 260 0006 8DF80730 		strb	r3, [sp, #7]
  60:Core/Src/CAN.c **** 	uint8_t CNF1 = 0x00; //BRP = 0 to make tq = 250ns and a SJW of 1Tq
 261              		.loc 1 60 2 is_stmt 1 view .LVU36
 262              	.LVL21:
  61:Core/Src/CAN.c **** 	uint8_t CNF2 = 0xd8; //PRSEG = 0, PHSEG1 = 3, SAM = 0, BTLMODE = 1
 263              		.loc 1 61 2 view .LVU37
  62:Core/Src/CAN.c **** 	uint8_t CNF3 = 0x01; //WAFKIL disabled, PHSEG2 = 2 (BTL enabled) but PHSEG = 1 makes it backwards 
 264              		.loc 1 62 2 view .LVU38
  63:Core/Src/CAN.c **** 
  64:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET);
 265              		.loc 1 64 2 view .LVU39
 266 000a 1E4C     		ldr	r4, .L15
 267 000c 0022     		movs	r2, #0
 268 000e 1021     		movs	r1, #16
 269 0010 2046     		mov	r0, r4
 270 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 271              	.LVL22:
  65:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, &resetCommand, 1, 100U);  //reset IC to default
 272              		.loc 1 65 2 view .LVU40
 273 0016 6423     		movs	r3, #100
 274 0018 0122     		movs	r2, #1
 275 001a 0DF10701 		add	r1, sp, #7
 276 001e 1A48     		ldr	r0, .L15+4
 277 0020 FFF7FEFF 		bl	HAL_SPI_Transmit
 278              	.LVL23:
  66:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET);
 279              		.loc 1 66 2 view .LVU41
 280 0024 0122     		movs	r2, #1
 281 0026 1021     		movs	r1, #16
 282 0028 2046     		mov	r0, r4
 283 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 7


 284              	.LVL24:
  67:Core/Src/CAN.c **** 
  68:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x0f, 0x80); //Ensure IC is in configuration mode
 285              		.loc 1 68 2 view .LVU42
 286 002e 8021     		movs	r1, #128
 287 0030 0F20     		movs	r0, #15
 288 0032 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 289              	.LVL25:
  69:Core/Src/CAN.c **** 
  70:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x2a, CNF1); //configure CNF1
 290              		.loc 1 70 2 view .LVU43
 291 0036 0021     		movs	r1, #0
 292 0038 2A20     		movs	r0, #42
 293 003a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 294              	.LVL26:
  71:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x29, CNF2); //configure CNF2
 295              		.loc 1 71 2 view .LVU44
 296 003e D821     		movs	r1, #216
 297 0040 2920     		movs	r0, #41
 298 0042 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 299              	.LVL27:
  72:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x28, CNF3); //configure CNF3
 300              		.loc 1 72 2 view .LVU45
 301 0046 0121     		movs	r1, #1
 302 0048 2820     		movs	r0, #40
 303 004a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 304              	.LVL28:
  73:Core/Src/CAN.c **** 
  74:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x2b, 0xff); //configure interrupts, currently enable error and and wakeup I
 305              		.loc 1 74 2 view .LVU46
 306 004e FF21     		movs	r1, #255
 307 0050 2B20     		movs	r0, #43
 308 0052 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 309              	.LVL29:
  75:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x2c, 0x00); //clear INTE flags
 310              		.loc 1 75 2 view .LVU47
 311 0056 0021     		movs	r1, #0
 312 0058 2C20     		movs	r0, #44
 313 005a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 314              	.LVL30:
  76:Core/Src/CAN.c **** 									   //this should be a bit-wise clear in any other case to avoid unintentionally clearing f
  77:Core/Src/CAN.c **** 
  78:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x0c, 0x0f); //set up RX0BF and RX1BF as interrupt pins
 315              		.loc 1 78 2 view .LVU48
 316 005e 0F21     		movs	r1, #15
 317 0060 0C20     		movs	r0, #12
 318 0062 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 319              	.LVL31:
  79:Core/Src/CAN.c **** 
  80:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x60, 0x60); //accept any message on buffer 0
 320              		.loc 1 80 2 view .LVU49
 321 0066 6021     		movs	r1, #96
 322 0068 0846     		mov	r0, r1
 323 006a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 324              	.LVL32:
  81:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x70, 0x60); //accept any message on buffer 1
 325              		.loc 1 81 2 view .LVU50
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 8


 326 006e 6021     		movs	r1, #96
 327 0070 7020     		movs	r0, #112
 328 0072 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 329              	.LVL33:
  82:Core/Src/CAN.c **** 
  83:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(0x0f, 0x04); //Put IC in normal operation mode with CLKOUT pin enable and 1:
 330              		.loc 1 83 2 view .LVU51
 331 0076 0421     		movs	r1, #4
 332 0078 0F20     		movs	r0, #15
 333 007a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 334              	.LVL34:
  84:Core/Src/CAN.c **** }
 335              		.loc 1 84 1 is_stmt 0 view .LVU52
 336 007e 02B0     		add	sp, sp, #8
 337              	.LCFI11:
 338              		.cfi_def_cfa_offset 8
 339              		@ sp needed
 340 0080 10BD     		pop	{r4, pc}
 341              	.L16:
 342 0082 00BF     		.align	2
 343              	.L15:
 344 0084 00000240 		.word	1073872896
 345 0088 00000000 		.word	hspi1
 346              		.cfi_endproc
 347              	.LFE79:
 349              		.section	.text.sendCANMessage,"ax",%progbits
 350              		.align	1
 351              		.global	sendCANMessage
 352              		.syntax unified
 353              		.thumb
 354              		.thumb_func
 356              	sendCANMessage:
 357              	.LVL35:
 358              	.LFB80:
  85:Core/Src/CAN.c **** 
  86:Core/Src/CAN.c **** /**
  87:Core/Src/CAN.c ****   * @brief send CAN message
  88:Core/Src/CAN.c ****   * @param None
  89:Core/Src/CAN.c ****   * @retval None
  90:Core/Src/CAN.c ****   */
  91:Core/Src/CAN.c **** void sendCANMessage(uint8_t channel, uint16_t ID, uint8_t DLC, uint8_t* data)
  92:Core/Src/CAN.c **** {
 359              		.loc 1 92 1 is_stmt 1 view -0
 360              		.cfi_startproc
 361              		@ args = 0, pretend = 0, frame = 8
 362              		@ frame_needed = 0, uses_anonymous_args = 0
 363              		.loc 1 92 1 is_stmt 0 view .LVU54
 364 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 365              	.LCFI12:
 366              		.cfi_def_cfa_offset 24
 367              		.cfi_offset 4, -24
 368              		.cfi_offset 5, -20
 369              		.cfi_offset 6, -16
 370              		.cfi_offset 7, -12
 371              		.cfi_offset 8, -8
 372              		.cfi_offset 14, -4
 373 0004 82B0     		sub	sp, sp, #8
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 9


 374              	.LCFI13:
 375              		.cfi_def_cfa_offset 32
 376 0006 1546     		mov	r5, r2
 377 0008 9846     		mov	r8, r3
  93:Core/Src/CAN.c **** 	uint8_t initialBufferAddress = 0x20 + 16*(channel); //0x30 for channel 1, 0x40 for channel 2, 0x50
 378              		.loc 1 93 2 is_stmt 1 view .LVU55
 379              		.loc 1 93 10 is_stmt 0 view .LVU56
 380 000a 861C     		adds	r6, r0, #2
 381 000c 3601     		lsls	r6, r6, #4
 382 000e F6B2     		uxtb	r6, r6
 383              	.LVL36:
  94:Core/Src/CAN.c **** 
  95:Core/Src/CAN.c **** 	uint8_t sendCommand = 0x81; //instruction to send CAN message on buffer 1
 384              		.loc 1 95 2 is_stmt 1 view .LVU57
 385              		.loc 1 95 10 is_stmt 0 view .LVU58
 386 0010 8123     		movs	r3, #129
 387              	.LVL37:
 388              		.loc 1 95 10 view .LVU59
 389 0012 8DF80730 		strb	r3, [sp, #7]
  96:Core/Src/CAN.c **** 
  97:Core/Src/CAN.c **** 	uint8_t TXBNSIDH = (ID & 0b11111111000) >> 3;
 390              		.loc 1 97 2 is_stmt 1 view .LVU60
 391              	.LVL38:
  98:Core/Src/CAN.c **** 	uint8_t TXBNSIDL = ((ID & 0b111) << 5);
 392              		.loc 1 98 2 view .LVU61
 393              		.loc 1 98 35 is_stmt 0 view .LVU62
 394 0016 4C01     		lsls	r4, r1, #5
 395              		.loc 1 98 10 view .LVU63
 396 0018 E4B2     		uxtb	r4, r4
 397              	.LVL39:
  99:Core/Src/CAN.c **** 	uint8_t TXBNDLC = DLC & 0x0f;
 398              		.loc 1 99 2 is_stmt 1 view .LVU64
 399              		.loc 1 99 10 is_stmt 0 view .LVU65
 400 001a 02F00F07 		and	r7, r2, #15
 401              	.LVL40:
 100:Core/Src/CAN.c **** 
 101:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 1, TXBNSIDH); // SD 10-3
 402              		.loc 1 101 2 is_stmt 1 view .LVU66
 403 001e 701C     		adds	r0, r6, #1
 404              	.LVL41:
 405              		.loc 1 101 2 is_stmt 0 view .LVU67
 406 0020 C1F3C701 		ubfx	r1, r1, #3, #8
 407              	.LVL42:
 408              		.loc 1 101 2 view .LVU68
 409 0024 C0B2     		uxtb	r0, r0
 410 0026 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 411              	.LVL43:
 102:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 2, TXBNSIDL); //SD 2-0
 412              		.loc 1 102 2 is_stmt 1 view .LVU69
 413 002a B01C     		adds	r0, r6, #2
 414 002c 2146     		mov	r1, r4
 415 002e 00F0FE00 		and	r0, r0, #254
 416 0032 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 417              	.LVL44:
 103:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 5, TXBNDLC);  //DLC
 418              		.loc 1 103 2 view .LVU70
 419 0036 701D     		adds	r0, r6, #5
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 10


 420 0038 3946     		mov	r1, r7
 421 003a C0B2     		uxtb	r0, r0
 422 003c FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 423              	.LVL45:
 104:Core/Src/CAN.c **** 
 105:Core/Src/CAN.c **** 	uint8_t initialDataBufferAddress = initialBufferAddress + 6;
 424              		.loc 1 105 2 view .LVU71
 425              		.loc 1 105 10 is_stmt 0 view .LVU72
 426 0040 B71D     		adds	r7, r6, #6
 427              	.LVL46:
 428              		.loc 1 105 10 view .LVU73
 429 0042 FFB2     		uxtb	r7, r7
 430              	.LVL47:
 106:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 431              		.loc 1 106 2 is_stmt 1 view .LVU74
 432              	.LBB2:
 433              		.loc 1 106 6 view .LVU75
 434              		.loc 1 106 10 is_stmt 0 view .LVU76
 435 0044 0024     		movs	r4, #0
 436              	.LVL48:
 437              		.loc 1 106 2 view .LVU77
 438 0046 06E0     		b	.L18
 439              	.LVL49:
 440              	.L19:
 107:Core/Src/CAN.c **** 	{
 108:Core/Src/CAN.c **** 		CAN_IC_WRITE_REGISTER(initialDataBufferAddress + i, data[i]); //write to relevant data registers
 441              		.loc 1 108 3 is_stmt 1 discriminator 3 view .LVU78
 442 0048 3819     		adds	r0, r7, r4
 443 004a 18F80410 		ldrb	r1, [r8, r4]	@ zero_extendqisi2
 444 004e C0B2     		uxtb	r0, r0
 445 0050 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 446              	.LVL50:
 106:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 447              		.loc 1 106 26 discriminator 3 view .LVU79
 106:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 448              		.loc 1 106 27 is_stmt 0 discriminator 3 view .LVU80
 449 0054 0134     		adds	r4, r4, #1
 450              	.LVL51:
 451              	.L18:
 106:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 452              		.loc 1 106 17 is_stmt 1 discriminator 1 view .LVU81
 106:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 453              		.loc 1 106 2 is_stmt 0 discriminator 1 view .LVU82
 454 0056 A542     		cmp	r5, r4
 455 0058 F6DC     		bgt	.L19
 456              	.LBE2:
 109:Core/Src/CAN.c **** 	}
 110:Core/Src/CAN.c **** 
 111:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER_BITWISE(initialBufferAddress, 0x02, 0x02); //set transmit buffer priority to
 457              		.loc 1 111 2 is_stmt 1 view .LVU83
 458 005a 0222     		movs	r2, #2
 459 005c 1146     		mov	r1, r2
 460 005e 3046     		mov	r0, r6
 461 0060 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER_BITWISE
 462              	.LVL52:
 112:Core/Src/CAN.c **** 
 113:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET);
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 11


 463              		.loc 1 113 2 view .LVU84
 464 0064 0A4C     		ldr	r4, .L21
 465              	.LVL53:
 466              		.loc 1 113 2 is_stmt 0 view .LVU85
 467 0066 0022     		movs	r2, #0
 468 0068 1021     		movs	r1, #16
 469 006a 2046     		mov	r0, r4
 470 006c FFF7FEFF 		bl	HAL_GPIO_WritePin
 471              	.LVL54:
 114:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, &sendCommand, 1, 100U);  //Send command to transmit
 472              		.loc 1 114 2 is_stmt 1 view .LVU86
 473 0070 6423     		movs	r3, #100
 474 0072 0122     		movs	r2, #1
 475 0074 0DF10701 		add	r1, sp, #7
 476 0078 0648     		ldr	r0, .L21+4
 477 007a FFF7FEFF 		bl	HAL_SPI_Transmit
 478              	.LVL55:
 115:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET);
 479              		.loc 1 115 2 view .LVU87
 480 007e 0122     		movs	r2, #1
 481 0080 1021     		movs	r1, #16
 482 0082 2046     		mov	r0, r4
 483 0084 FFF7FEFF 		bl	HAL_GPIO_WritePin
 484              	.LVL56:
 116:Core/Src/CAN.c **** }
 485              		.loc 1 116 1 is_stmt 0 view .LVU88
 486 0088 02B0     		add	sp, sp, #8
 487              	.LCFI14:
 488              		.cfi_def_cfa_offset 24
 489              		@ sp needed
 490 008a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 491              	.LVL57:
 492              	.L22:
 493              		.loc 1 116 1 view .LVU89
 494 008e 00BF     		.align	2
 495              	.L21:
 496 0090 00000240 		.word	1073872896
 497 0094 00000000 		.word	hspi1
 498              		.cfi_endproc
 499              	.LFE80:
 501              		.section	.text.sendExtendedCANMessage,"ax",%progbits
 502              		.align	1
 503              		.global	sendExtendedCANMessage
 504              		.syntax unified
 505              		.thumb
 506              		.thumb_func
 508              	sendExtendedCANMessage:
 509              	.LVL58:
 510              	.LFB81:
 117:Core/Src/CAN.c **** 
 118:Core/Src/CAN.c **** /**
 119:Core/Src/CAN.c ****   * @brief send CAN message with extended identifier
 120:Core/Src/CAN.c ****   * @param None
 121:Core/Src/CAN.c ****   * @retval None
 122:Core/Src/CAN.c ****   */
 123:Core/Src/CAN.c **** void sendExtendedCANMessage(uint8_t channel, uint64_t ID, uint8_t DLC, uint8_t* data)
 124:Core/Src/CAN.c **** {
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 12


 511              		.loc 1 124 1 is_stmt 1 view -0
 512              		.cfi_startproc
 513              		@ args = 8, pretend = 0, frame = 8
 514              		@ frame_needed = 0, uses_anonymous_args = 0
 515              		.loc 1 124 1 is_stmt 0 view .LVU91
 516 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 517              	.LCFI15:
 518              		.cfi_def_cfa_offset 36
 519              		.cfi_offset 4, -36
 520              		.cfi_offset 5, -32
 521              		.cfi_offset 6, -28
 522              		.cfi_offset 7, -24
 523              		.cfi_offset 8, -20
 524              		.cfi_offset 9, -16
 525              		.cfi_offset 10, -12
 526              		.cfi_offset 11, -8
 527              		.cfi_offset 14, -4
 528 0004 83B0     		sub	sp, sp, #12
 529              	.LCFI16:
 530              		.cfi_def_cfa_offset 48
 531 0006 9DF83060 		ldrb	r6, [sp, #48]	@ zero_extendqisi2
 532 000a 0D9F     		ldr	r7, [sp, #52]
 125:Core/Src/CAN.c **** 	uint8_t initialBufferAddress = 0x30 + 16*(channel); //0x30 for channel 1, 0x40 for channel 2, 0x50
 533              		.loc 1 125 2 is_stmt 1 view .LVU92
 534              		.loc 1 125 10 is_stmt 0 view .LVU93
 535 000c C51C     		adds	r5, r0, #3
 536 000e 2D01     		lsls	r5, r5, #4
 537 0010 EDB2     		uxtb	r5, r5
 538              	.LVL59:
 126:Core/Src/CAN.c **** 
 127:Core/Src/CAN.c **** 	uint8_t sendCommand = 0x80 +  (1 << channel); //instruction to send CAN message on channel
 539              		.loc 1 127 2 is_stmt 1 view .LVU94
 540              		.loc 1 127 35 is_stmt 0 view .LVU95
 541 0012 0121     		movs	r1, #1
 542 0014 8140     		lsls	r1, r1, r0
 543              		.loc 1 127 29 view .LVU96
 544 0016 8039     		subs	r1, r1, #128
 545              		.loc 1 127 10 view .LVU97
 546 0018 8DF80710 		strb	r1, [sp, #7]
 128:Core/Src/CAN.c **** 
 129:Core/Src/CAN.c **** 	uint8_t TXBNEID0 = ID & 0xff;
 547              		.loc 1 129 2 is_stmt 1 view .LVU98
 548              		.loc 1 129 10 is_stmt 0 view .LVU99
 549 001c 8DF80620 		strb	r2, [sp, #6]
 130:Core/Src/CAN.c **** 	uint8_t TXBNEID8 = (ID >> 8) & 0xff;
 550              		.loc 1 130 2 is_stmt 1 view .LVU100
 551              		.loc 1 130 25 is_stmt 0 view .LVU101
 552 0020 110A     		lsrs	r1, r2, #8
 553              		.loc 1 130 10 view .LVU102
 554 0022 8DF80510 		strb	r1, [sp, #5]
 131:Core/Src/CAN.c **** 	uint8_t TXBNSIDL = (((ID >> 18) & 0x07) << 5) | 0b00001000 | ((ID >> 16) & 0x03);
 555              		.loc 1 131 2 is_stmt 1 view .LVU103
 556              		.loc 1 131 27 is_stmt 0 view .LVU104
 557 0026 900C     		lsrs	r0, r2, #18
 558              	.LVL60:
 559              		.loc 1 131 27 view .LVU105
 560 0028 40EA8330 		orr	r0, r0, r3, lsl #14
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 13


 561              		.loc 1 131 42 view .LVU106
 562 002c 4301     		lsls	r3, r0, #5
 563 002e DBB2     		uxtb	r3, r3
 564              		.loc 1 131 75 view .LVU107
 565 0030 C2F30140 		ubfx	r0, r2, #16, #2
 566              		.loc 1 131 61 view .LVU108
 567 0034 0343     		orrs	r3, r3, r0
 568 0036 43F00803 		orr	r3, r3, #8
 569              		.loc 1 131 10 view .LVU109
 570 003a 8DF80430 		strb	r3, [sp, #4]
 132:Core/Src/CAN.c **** 	uint8_t TXBNSIDH = (ID >> 21) & 0xff;
 571              		.loc 1 132 2 is_stmt 1 view .LVU110
 572              		.loc 1 132 10 is_stmt 0 view .LVU111
 573 003e C2F34751 		ubfx	r1, r2, #21, #8
 574 0042 8DF80310 		strb	r1, [sp, #3]
 133:Core/Src/CAN.c **** 	uint8_t TXBNDLC = DLC & 0x0f;
 575              		.loc 1 133 2 is_stmt 1 view .LVU112
 576              		.loc 1 133 24 is_stmt 0 view .LVU113
 577 0046 06F00F03 		and	r3, r6, #15
 578              		.loc 1 133 10 view .LVU114
 579 004a 8DF80230 		strb	r3, [sp, #2]
 134:Core/Src/CAN.c **** 
 135:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 1, TXBNSIDH); // SD 10-3
 580              		.loc 1 135 2 is_stmt 1 view .LVU115
 581 004e 05F1010A 		add	r10, r5, #1
 582 0052 5FFA8AFA 		uxtb	r10, r10
 583 0056 5046     		mov	r0, r10
 584 0058 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 585              	.LVL61:
 136:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 2, TXBNSIDL); //SD 2-0, ED 17-16
 586              		.loc 1 136 2 view .LVU116
 587 005c 05F1020B 		add	fp, r5, #2
 588 0060 5FFA8BFB 		uxtb	fp, fp
 589 0064 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 590 0068 5846     		mov	r0, fp
 591 006a FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 592              	.LVL62:
 137:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 3, TXBNEID8); //ED 15-8
 593              		.loc 1 137 2 view .LVU117
 594 006e 05F10309 		add	r9, r5, #3
 595 0072 5FFA89F9 		uxtb	r9, r9
 596 0076 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 597 007a 4846     		mov	r0, r9
 598 007c FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 599              	.LVL63:
 138:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 4, TXBNEID0); //ED 7-0
 600              		.loc 1 138 2 view .LVU118
 601 0080 05F10408 		add	r8, r5, #4
 602 0084 5FFA88F8 		uxtb	r8, r8
 603 0088 9DF80610 		ldrb	r1, [sp, #6]	@ zero_extendqisi2
 604 008c 4046     		mov	r0, r8
 605 008e FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 606              	.LVL64:
 139:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER(initialBufferAddress + 5, TXBNDLC);  //DLC
 607              		.loc 1 139 2 view .LVU119
 608 0092 6C1D     		adds	r4, r5, #5
 609 0094 E4B2     		uxtb	r4, r4
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 14


 610 0096 9DF80210 		ldrb	r1, [sp, #2]	@ zero_extendqisi2
 611 009a 2046     		mov	r0, r4
 612 009c FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 613              	.LVL65:
 140:Core/Src/CAN.c **** 
 141:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 1, &TXBNSIDH); // SD 10-3
 614              		.loc 1 141 2 view .LVU120
 615 00a0 0DF10301 		add	r1, sp, #3
 616 00a4 5046     		mov	r0, r10
 617 00a6 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 618              	.LVL66:
 142:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 2, &TXBNSIDL); //SD 2-0, ED 17-16
 619              		.loc 1 142 2 view .LVU121
 620 00aa 01A9     		add	r1, sp, #4
 621 00ac 5846     		mov	r0, fp
 622 00ae FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 623              	.LVL67:
 143:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 3, &TXBNEID8); //ED 15-8
 624              		.loc 1 143 2 view .LVU122
 625 00b2 0DF10501 		add	r1, sp, #5
 626 00b6 4846     		mov	r0, r9
 627 00b8 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 628              	.LVL68:
 144:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 4, &TXBNEID0); //ED 7-0
 629              		.loc 1 144 2 view .LVU123
 630 00bc 0DF10601 		add	r1, sp, #6
 631 00c0 4046     		mov	r0, r8
 632 00c2 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 633              	.LVL69:
 145:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 5, &TXBNDLC);  //DLC
 634              		.loc 1 145 2 view .LVU124
 635 00c6 0DF10201 		add	r1, sp, #2
 636 00ca 2046     		mov	r0, r4
 637 00cc FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 638              	.LVL70:
 146:Core/Src/CAN.c **** 
 147:Core/Src/CAN.c **** 	uint8_t initialDataBufferAddress = initialBufferAddress + 6;
 639              		.loc 1 147 2 view .LVU125
 640              		.loc 1 147 10 is_stmt 0 view .LVU126
 641 00d0 05F10608 		add	r8, r5, #6
 642 00d4 5FFA88F8 		uxtb	r8, r8
 643              	.LVL71:
 148:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 644              		.loc 1 148 2 is_stmt 1 view .LVU127
 645              	.LBB3:
 646              		.loc 1 148 6 view .LVU128
 647              		.loc 1 148 10 is_stmt 0 view .LVU129
 648 00d8 0024     		movs	r4, #0
 649              		.loc 1 148 2 view .LVU130
 650 00da 06E0     		b	.L24
 651              	.LVL72:
 652              	.L25:
 149:Core/Src/CAN.c **** 	{
 150:Core/Src/CAN.c **** 		CAN_IC_WRITE_REGISTER(initialDataBufferAddress + i, data[i]); //write to relevant data registers
 653              		.loc 1 150 3 is_stmt 1 discriminator 3 view .LVU131
 654 00dc 08EB0400 		add	r0, r8, r4
 655 00e0 395D     		ldrb	r1, [r7, r4]	@ zero_extendqisi2
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 15


 656 00e2 C0B2     		uxtb	r0, r0
 657 00e4 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER
 658              	.LVL73:
 148:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 659              		.loc 1 148 26 discriminator 3 view .LVU132
 148:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 660              		.loc 1 148 27 is_stmt 0 discriminator 3 view .LVU133
 661 00e8 0134     		adds	r4, r4, #1
 662              	.LVL74:
 663              	.L24:
 148:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 664              		.loc 1 148 17 is_stmt 1 discriminator 1 view .LVU134
 148:Core/Src/CAN.c **** 	for(int i = 0; i < DLC; i++)
 665              		.loc 1 148 2 is_stmt 0 discriminator 1 view .LVU135
 666 00ea A642     		cmp	r6, r4
 667 00ec F6DC     		bgt	.L25
 668              	.LBE3:
 151:Core/Src/CAN.c **** 	}
 152:Core/Src/CAN.c **** 
 153:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER_BITWISE(initialBufferAddress, 0x02, 0x02); //set transmit buffer priority to
 669              		.loc 1 153 2 is_stmt 1 view .LVU136
 670 00ee 0222     		movs	r2, #2
 671 00f0 1146     		mov	r1, r2
 672 00f2 2846     		mov	r0, r5
 673 00f4 FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER_BITWISE
 674              	.LVL75:
 154:Core/Src/CAN.c **** 
 155:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_RESET);
 675              		.loc 1 155 2 view .LVU137
 676 00f8 0A4C     		ldr	r4, .L27
 677              	.LVL76:
 678              		.loc 1 155 2 is_stmt 0 view .LVU138
 679 00fa 0022     		movs	r2, #0
 680 00fc 1021     		movs	r1, #16
 681 00fe 2046     		mov	r0, r4
 682 0100 FFF7FEFF 		bl	HAL_GPIO_WritePin
 683              	.LVL77:
 156:Core/Src/CAN.c **** 	HAL_SPI_Transmit(&hspi1, &sendCommand, 1, 100U);  //Send command to transmit
 684              		.loc 1 156 2 is_stmt 1 view .LVU139
 685 0104 6423     		movs	r3, #100
 686 0106 0122     		movs	r2, #1
 687 0108 0DF10701 		add	r1, sp, #7
 688 010c 0648     		ldr	r0, .L27+4
 689 010e FFF7FEFF 		bl	HAL_SPI_Transmit
 690              	.LVL78:
 157:Core/Src/CAN.c **** 	HAL_GPIO_WritePin(SPI1_CS_GPIO_Port, SPI1_CS_Pin, GPIO_PIN_SET);
 691              		.loc 1 157 2 view .LVU140
 692 0112 0122     		movs	r2, #1
 693 0114 1021     		movs	r1, #16
 694 0116 2046     		mov	r0, r4
 695 0118 FFF7FEFF 		bl	HAL_GPIO_WritePin
 696              	.LVL79:
 158:Core/Src/CAN.c **** }
 697              		.loc 1 158 1 is_stmt 0 view .LVU141
 698 011c 03B0     		add	sp, sp, #12
 699              	.LCFI17:
 700              		.cfi_def_cfa_offset 36
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 16


 701              		@ sp needed
 702 011e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 703              	.LVL80:
 704              	.L28:
 705              		.loc 1 158 1 view .LVU142
 706 0122 00BF     		.align	2
 707              	.L27:
 708 0124 00000240 		.word	1073872896
 709 0128 00000000 		.word	hspi1
 710              		.cfi_endproc
 711              	.LFE81:
 713              		.section	.text.receiveCANMessage,"ax",%progbits
 714              		.align	1
 715              		.global	receiveCANMessage
 716              		.syntax unified
 717              		.thumb
 718              		.thumb_func
 720              	receiveCANMessage:
 721              	.LVL81:
 722              	.LFB82:
 159:Core/Src/CAN.c **** 
 160:Core/Src/CAN.c **** 
 161:Core/Src/CAN.c **** 
 162:Core/Src/CAN.c **** /**
 163:Core/Src/CAN.c ****   * @brief Receive CAN message
 164:Core/Src/CAN.c ****   * @param None
 165:Core/Src/CAN.c ****   * @retval None
 166:Core/Src/CAN.c ****   */
 167:Core/Src/CAN.c **** void receiveCANMessage(uint8_t channel, uint32_t* ID, uint8_t* DLC, uint8_t* data)
 168:Core/Src/CAN.c **** {
 723              		.loc 1 168 1 is_stmt 1 view -0
 724              		.cfi_startproc
 725              		@ args = 0, pretend = 0, frame = 8
 726              		@ frame_needed = 0, uses_anonymous_args = 0
 727              		.loc 1 168 1 is_stmt 0 view .LVU144
 728 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 729              	.LCFI18:
 730              		.cfi_def_cfa_offset 28
 731              		.cfi_offset 4, -28
 732              		.cfi_offset 5, -24
 733              		.cfi_offset 6, -20
 734              		.cfi_offset 7, -16
 735              		.cfi_offset 8, -12
 736              		.cfi_offset 9, -8
 737              		.cfi_offset 14, -4
 738 0004 83B0     		sub	sp, sp, #12
 739              	.LCFI19:
 740              		.cfi_def_cfa_offset 40
 741 0006 8046     		mov	r8, r0
 742 0008 0C46     		mov	r4, r1
 743 000a 1746     		mov	r7, r2
 744 000c 1D46     		mov	r5, r3
 169:Core/Src/CAN.c **** 	uint8_t initialBufferAddress = 0x60 + 16*(channel); //0x60 for channel 1, 0x70 for channel 2
 745              		.loc 1 169 2 is_stmt 1 view .LVU145
 746              		.loc 1 169 10 is_stmt 0 view .LVU146
 747 000e 861D     		adds	r6, r0, #6
 748 0010 3601     		lsls	r6, r6, #4
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 17


 749 0012 F6B2     		uxtb	r6, r6
 750              	.LVL82:
 170:Core/Src/CAN.c **** 
 171:Core/Src/CAN.c **** 	uint8_t RXBNSIDH = 0;
 751              		.loc 1 171 2 is_stmt 1 view .LVU147
 752              		.loc 1 171 10 is_stmt 0 view .LVU148
 753 0014 0023     		movs	r3, #0
 754              	.LVL83:
 755              		.loc 1 171 10 view .LVU149
 756 0016 8DF80730 		strb	r3, [sp, #7]
 172:Core/Src/CAN.c **** 	uint8_t RXBNSIDL = 0;
 757              		.loc 1 172 2 is_stmt 1 view .LVU150
 758              		.loc 1 172 10 is_stmt 0 view .LVU151
 759 001a 8DF80630 		strb	r3, [sp, #6]
 173:Core/Src/CAN.c **** 	uint8_t RXBDLC = 0;
 760              		.loc 1 173 2 is_stmt 1 view .LVU152
 761              		.loc 1 173 10 is_stmt 0 view .LVU153
 762 001e 8DF80530 		strb	r3, [sp, #5]
 174:Core/Src/CAN.c **** 
 175:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 1, &RXBNSIDH); // SD 10-3
 763              		.loc 1 175 2 is_stmt 1 view .LVU154
 764 0022 701C     		adds	r0, r6, #1
 765              	.LVL84:
 766              		.loc 1 175 2 is_stmt 0 view .LVU155
 767 0024 0DF10701 		add	r1, sp, #7
 768              	.LVL85:
 769              		.loc 1 175 2 view .LVU156
 770 0028 C0B2     		uxtb	r0, r0
 771 002a FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 772              	.LVL86:
 176:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 2, &RXBNSIDL); //SD 2-0, IDE, ED 17-16
 773              		.loc 1 176 2 is_stmt 1 view .LVU157
 774 002e B01C     		adds	r0, r6, #2
 775 0030 0DF10601 		add	r1, sp, #6
 776 0034 00F0FE00 		and	r0, r0, #254
 777 0038 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 778              	.LVL87:
 177:Core/Src/CAN.c **** 	CAN_IC_READ_REGISTER(initialBufferAddress + 5, &RXBDLC); //DLC
 779              		.loc 1 177 2 view .LVU158
 780 003c 701D     		adds	r0, r6, #5
 781 003e 0DF10501 		add	r1, sp, #5
 782 0042 C0B2     		uxtb	r0, r0
 783 0044 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 784              	.LVL88:
 178:Core/Src/CAN.c **** 
 179:Core/Src/CAN.c **** 	if(RXBNSIDL & 0x08)
 785              		.loc 1 179 2 view .LVU159
 786              		.loc 1 179 14 is_stmt 0 view .LVU160
 787 0048 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 788              		.loc 1 179 4 view .LVU161
 789 004c 13F0080F 		tst	r3, #8
 790 0050 0ED1     		bne	.L35
 180:Core/Src/CAN.c **** 	{
 181:Core/Src/CAN.c **** 		uint8_t RXBNEID8 = 0;
 182:Core/Src/CAN.c **** 		uint8_t RXBNEID0 = 0;
 183:Core/Src/CAN.c **** 
 184:Core/Src/CAN.c **** 		CAN_IC_READ_REGISTER(initialBufferAddress + 3, &RXBNEID8); //ED 15-8
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 18


 185:Core/Src/CAN.c **** 		CAN_IC_READ_REGISTER(initialBufferAddress + 4, &RXBNEID0); //ED 7-0
 186:Core/Src/CAN.c **** 
 187:Core/Src/CAN.c **** 		*ID = (RXBNSIDH << 21) | (((RXBNSIDL >> 5) & 0x07) << 18) | ((RXBNSIDL & 0x03) << 16) | (RXBNEID8
 188:Core/Src/CAN.c **** 	} else
 189:Core/Src/CAN.c **** 	{
 190:Core/Src/CAN.c **** 		*ID = (RXBNSIDH << 3) | (RXBNSIDL >> 5);
 791              		.loc 1 190 3 is_stmt 1 view .LVU162
 792              		.loc 1 190 19 is_stmt 0 view .LVU163
 793 0052 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 794              		.loc 1 190 37 view .LVU164
 795 0056 5B09     		lsrs	r3, r3, #5
 796              		.loc 1 190 25 view .LVU165
 797 0058 43EAC203 		orr	r3, r3, r2, lsl #3
 798              		.loc 1 190 7 view .LVU166
 799 005c 2360     		str	r3, [r4]
 800              	.L31:
 191:Core/Src/CAN.c **** 	}
 192:Core/Src/CAN.c **** 
 193:Core/Src/CAN.c **** 	*DLC = RXBDLC & 0x0f;
 801              		.loc 1 193 2 is_stmt 1 view .LVU167
 802              		.loc 1 193 16 is_stmt 0 view .LVU168
 803 005e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 804 0062 03F00F03 		and	r3, r3, #15
 805              		.loc 1 193 7 view .LVU169
 806 0066 3B70     		strb	r3, [r7]
 194:Core/Src/CAN.c **** 
 195:Core/Src/CAN.c **** 	uint8_t initialDataBufferAddress = initialBufferAddress + 6;
 807              		.loc 1 195 2 is_stmt 1 view .LVU170
 808              		.loc 1 195 10 is_stmt 0 view .LVU171
 809 0068 0636     		adds	r6, r6, #6
 810              	.LVL89:
 811              		.loc 1 195 10 view .LVU172
 812 006a F6B2     		uxtb	r6, r6
 813              	.LVL90:
 196:Core/Src/CAN.c **** 	for(int i = 0; i < *DLC; i++)
 814              		.loc 1 196 2 is_stmt 1 view .LVU173
 815              	.LBB4:
 816              		.loc 1 196 6 view .LVU174
 817              		.loc 1 196 10 is_stmt 0 view .LVU175
 818 006c 0024     		movs	r4, #0
 819              	.LVL91:
 820              		.loc 1 196 2 view .LVU176
 821 006e 2EE0     		b	.L32
 822              	.LVL92:
 823              	.L35:
 824              		.loc 1 196 2 view .LVU177
 825              	.LBE4:
 826              	.LBB5:
 181:Core/Src/CAN.c **** 		uint8_t RXBNEID0 = 0;
 827              		.loc 1 181 3 is_stmt 1 view .LVU178
 181:Core/Src/CAN.c **** 		uint8_t RXBNEID0 = 0;
 828              		.loc 1 181 11 is_stmt 0 view .LVU179
 829 0070 0023     		movs	r3, #0
 830 0072 8DF80330 		strb	r3, [sp, #3]
 182:Core/Src/CAN.c **** 
 831              		.loc 1 182 3 is_stmt 1 view .LVU180
 182:Core/Src/CAN.c **** 
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 19


 832              		.loc 1 182 11 is_stmt 0 view .LVU181
 833 0076 8DF80430 		strb	r3, [sp, #4]
 184:Core/Src/CAN.c **** 		CAN_IC_READ_REGISTER(initialBufferAddress + 4, &RXBNEID0); //ED 7-0
 834              		.loc 1 184 3 is_stmt 1 view .LVU182
 835 007a F01C     		adds	r0, r6, #3
 836 007c 0DF10301 		add	r1, sp, #3
 837 0080 C0B2     		uxtb	r0, r0
 838 0082 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 839              	.LVL93:
 185:Core/Src/CAN.c **** 
 840              		.loc 1 185 3 view .LVU183
 841 0086 301D     		adds	r0, r6, #4
 842 0088 01A9     		add	r1, sp, #4
 843 008a 00F0FC00 		and	r0, r0, #252
 844 008e FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 845              	.LVL94:
 187:Core/Src/CAN.c **** 	} else
 846              		.loc 1 187 3 view .LVU184
 187:Core/Src/CAN.c **** 	} else
 847              		.loc 1 187 19 is_stmt 0 view .LVU185
 848 0092 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 187:Core/Src/CAN.c **** 	} else
 849              		.loc 1 187 54 view .LVU186
 850 0096 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 851 009a 5309     		lsrs	r3, r2, #5
 852 009c 9B04     		lsls	r3, r3, #18
 187:Core/Src/CAN.c **** 	} else
 853              		.loc 1 187 26 view .LVU187
 854 009e 43EA4153 		orr	r3, r3, r1, lsl #21
 187:Core/Src/CAN.c **** 	} else
 855              		.loc 1 187 82 view .LVU188
 856 00a2 1204     		lsls	r2, r2, #16
 857 00a4 02F44032 		and	r2, r2, #196608
 187:Core/Src/CAN.c **** 	} else
 858              		.loc 1 187 61 view .LVU189
 859 00a8 1343     		orrs	r3, r3, r2
 187:Core/Src/CAN.c **** 	} else
 860              		.loc 1 187 101 view .LVU190
 861 00aa 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 187:Core/Src/CAN.c **** 	} else
 862              		.loc 1 187 89 view .LVU191
 863 00ae 43EA0223 		orr	r3, r3, r2, lsl #8
 187:Core/Src/CAN.c **** 	} else
 864              		.loc 1 187 107 view .LVU192
 865 00b2 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 866 00b6 1343     		orrs	r3, r3, r2
 187:Core/Src/CAN.c **** 	} else
 867              		.loc 1 187 7 view .LVU193
 868 00b8 2360     		str	r3, [r4]
 869              	.LBE5:
 870 00ba D0E7     		b	.L31
 871              	.LVL95:
 872              	.L33:
 873              	.LBB6:
 197:Core/Src/CAN.c **** 	{
 198:Core/Src/CAN.c **** 		CAN_IC_READ_REGISTER(initialDataBufferAddress + i, (data++)); //read from relevant data registers
 874              		.loc 1 198 3 is_stmt 1 discriminator 3 view .LVU194
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 20


 875 00bc 05F10109 		add	r9, r5, #1
 876              	.LVL96:
 877              		.loc 1 198 3 is_stmt 0 discriminator 3 view .LVU195
 878 00c0 3019     		adds	r0, r6, r4
 879 00c2 2946     		mov	r1, r5
 880 00c4 C0B2     		uxtb	r0, r0
 881 00c6 FFF7FEFF 		bl	CAN_IC_READ_REGISTER
 882              	.LVL97:
 196:Core/Src/CAN.c **** 	{
 883              		.loc 1 196 27 is_stmt 1 discriminator 3 view .LVU196
 196:Core/Src/CAN.c **** 	{
 884              		.loc 1 196 28 is_stmt 0 discriminator 3 view .LVU197
 885 00ca 0134     		adds	r4, r4, #1
 886              	.LVL98:
 887              		.loc 1 198 3 discriminator 3 view .LVU198
 888 00cc 4D46     		mov	r5, r9
 889              	.LVL99:
 890              	.L32:
 196:Core/Src/CAN.c **** 	{
 891              		.loc 1 196 17 is_stmt 1 discriminator 1 view .LVU199
 196:Core/Src/CAN.c **** 	{
 892              		.loc 1 196 21 is_stmt 0 discriminator 1 view .LVU200
 893 00ce 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 196:Core/Src/CAN.c **** 	{
 894              		.loc 1 196 2 discriminator 1 view .LVU201
 895 00d0 A342     		cmp	r3, r4
 896 00d2 F3DC     		bgt	.L33
 196:Core/Src/CAN.c **** 	{
 897              		.loc 1 196 2 discriminator 1 view .LVU202
 898              	.LBE6:
 199:Core/Src/CAN.c **** 	}
 200:Core/Src/CAN.c **** 
 201:Core/Src/CAN.c **** 	CAN_IC_WRITE_REGISTER_BITWISE(0x2c, channel + 1, channel + 1); //clear interrupts
 899              		.loc 1 201 2 is_stmt 1 view .LVU203
 900 00d4 08F10101 		add	r1, r8, #1
 901 00d8 C9B2     		uxtb	r1, r1
 902 00da 0A46     		mov	r2, r1
 903 00dc 2C20     		movs	r0, #44
 904 00de FFF7FEFF 		bl	CAN_IC_WRITE_REGISTER_BITWISE
 905              	.LVL100:
 202:Core/Src/CAN.c **** 
 203:Core/Src/CAN.c **** 	return;
 906              		.loc 1 203 2 view .LVU204
 204:Core/Src/CAN.c **** }
 907              		.loc 1 204 1 is_stmt 0 view .LVU205
 908 00e2 03B0     		add	sp, sp, #12
 909              	.LCFI20:
 910              		.cfi_def_cfa_offset 28
 911              		@ sp needed
 912 00e4 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 913              		.loc 1 204 1 view .LVU206
 914              		.cfi_endproc
 915              	.LFE82:
 917              		.section	.text.CANRXInterruptTask,"ax",%progbits
 918              		.align	1
 919              		.global	CANRXInterruptTask
 920              		.syntax unified
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 21


 921              		.thumb
 922              		.thumb_func
 924              	CANRXInterruptTask:
 925              	.LVL101:
 926              	.LFB83:
 205:Core/Src/CAN.c **** 
 206:Core/Src/CAN.c **** void CANRXInterruptTask(void const* arg)
 207:Core/Src/CAN.c **** {
 927              		.loc 1 207 1 is_stmt 1 view -0
 928              		.cfi_startproc
 929              		@ args = 0, pretend = 0, frame = 24
 930              		@ frame_needed = 0, uses_anonymous_args = 0
 931              		.loc 1 207 1 is_stmt 0 view .LVU208
 932 0000 10B5     		push	{r4, lr}
 933              	.LCFI21:
 934              		.cfi_def_cfa_offset 8
 935              		.cfi_offset 4, -8
 936              		.cfi_offset 14, -4
 937 0002 86B0     		sub	sp, sp, #24
 938              	.LCFI22:
 939              		.cfi_def_cfa_offset 32
 208:Core/Src/CAN.c **** 	uint16_t GPIO_Pin = 0;
 940              		.loc 1 208 2 is_stmt 1 view .LVU209
 941              		.loc 1 208 11 is_stmt 0 view .LVU210
 942 0004 0024     		movs	r4, #0
 943 0006 ADF81640 		strh	r4, [sp, #22]	@ movhi
 209:Core/Src/CAN.c **** 	osMessageQueueGet(CANInterruptQueue, &GPIO_Pin, 0, osWaitForever);
 944              		.loc 1 209 2 is_stmt 1 view .LVU211
 945 000a 4FF0FF33 		mov	r3, #-1
 946 000e 2246     		mov	r2, r4
 947 0010 0DF11601 		add	r1, sp, #22
 948 0014 1F48     		ldr	r0, .L44
 949              	.LVL102:
 950              		.loc 1 209 2 is_stmt 0 view .LVU212
 951 0016 0068     		ldr	r0, [r0]
 952 0018 FFF7FEFF 		bl	osMessageQueueGet
 953              	.LVL103:
 210:Core/Src/CAN.c **** 
 211:Core/Src/CAN.c **** 	uint32_t ID = 0;
 954              		.loc 1 211 2 is_stmt 1 view .LVU213
 955              		.loc 1 211 11 is_stmt 0 view .LVU214
 956 001c 0494     		str	r4, [sp, #16]
 212:Core/Src/CAN.c **** 	uint8_t DLC = 0;
 957              		.loc 1 212 2 is_stmt 1 view .LVU215
 958              		.loc 1 212 10 is_stmt 0 view .LVU216
 959 001e 8DF80F40 		strb	r4, [sp, #15]
 213:Core/Src/CAN.c **** 	uint8_t data[8] = {0};
 960              		.loc 1 213 2 is_stmt 1 view .LVU217
 961              		.loc 1 213 10 is_stmt 0 view .LVU218
 962 0022 0194     		str	r4, [sp, #4]
 963 0024 0294     		str	r4, [sp, #8]
 214:Core/Src/CAN.c **** 
 215:Core/Src/CAN.c **** 	if (osMutexWait(SPIMutexHandle, 0) == osOK)
 964              		.loc 1 215 2 is_stmt 1 view .LVU219
 965              		.loc 1 215 6 is_stmt 0 view .LVU220
 966 0026 2146     		mov	r1, r4
 967 0028 1B4B     		ldr	r3, .L44+4
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 22


 968 002a 1868     		ldr	r0, [r3]
 969 002c FFF7FEFF 		bl	osMutexAcquire
 970              	.LVL104:
 971              		.loc 1 215 5 view .LVU221
 972 0030 50B9     		cbnz	r0, .L37
 216:Core/Src/CAN.c **** 	{
 217:Core/Src/CAN.c **** 		if(GPIO_Pin == CAN_RX0BF_Pin)
 973              		.loc 1 217 3 is_stmt 1 view .LVU222
 974              		.loc 1 217 15 is_stmt 0 view .LVU223
 975 0032 BDF81630 		ldrh	r3, [sp, #22]
 976              		.loc 1 217 5 view .LVU224
 977 0036 202B     		cmp	r3, #32
 978 0038 19D0     		beq	.L42
 218:Core/Src/CAN.c **** 		{
 219:Core/Src/CAN.c **** 			receiveCANMessage(0, &ID, &DLC, data);
 220:Core/Src/CAN.c **** 		}
 221:Core/Src/CAN.c **** 		else
 222:Core/Src/CAN.c **** 		{
 223:Core/Src/CAN.c **** 			receiveCANMessage(1, &ID, &DLC, data);
 979              		.loc 1 223 4 is_stmt 1 view .LVU225
 980 003a 01AB     		add	r3, sp, #4
 981 003c 0DF10F02 		add	r2, sp, #15
 982 0040 04A9     		add	r1, sp, #16
 983 0042 0120     		movs	r0, #1
 984 0044 FFF7FEFF 		bl	receiveCANMessage
 985              	.LVL105:
 986              	.L37:
 224:Core/Src/CAN.c **** 		}
 225:Core/Src/CAN.c **** 	}
 226:Core/Src/CAN.c **** 
 227:Core/Src/CAN.c **** 	osMutexRelease(SPIMutexHandle);
 987              		.loc 1 227 2 view .LVU226
 988 0048 134B     		ldr	r3, .L44+4
 989 004a 1868     		ldr	r0, [r3]
 990 004c FFF7FEFF 		bl	osMutexRelease
 991              	.LVL106:
 228:Core/Src/CAN.c **** 
 229:Core/Src/CAN.c **** 	if(ID == 0xCCCCCCC)
 992              		.loc 1 229 2 view .LVU227
 993              		.loc 1 229 4 is_stmt 0 view .LVU228
 994 0050 049A     		ldr	r2, [sp, #16]
 995 0052 124B     		ldr	r3, .L44+8
 996 0054 9A42     		cmp	r2, r3
 997 0056 12D0     		beq	.L43
 230:Core/Src/CAN.c **** 	{
 231:Core/Src/CAN.c **** 		blueStatus = data[0];
 232:Core/Src/CAN.c **** 		HAL_GPIO_TogglePin(LED_BLUE_GPIO_Port, LED_BLUE_Pin);
 233:Core/Src/CAN.c **** 	}
 234:Core/Src/CAN.c **** 	else
 235:Core/Src/CAN.c **** 	{
 236:Core/Src/CAN.c **** 		greenStatus = data[0];
 998              		.loc 1 236 3 is_stmt 1 view .LVU229
 999              		.loc 1 236 21 is_stmt 0 view .LVU230
 1000 0058 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 1001              		.loc 1 236 15 view .LVU231
 1002 005c 104B     		ldr	r3, .L44+12
 1003 005e 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 23


 237:Core/Src/CAN.c **** 		HAL_GPIO_TogglePin(LED_RED_GPIO_Port, LED_RED_Pin);
 1004              		.loc 1 237 3 is_stmt 1 view .LVU232
 1005 0060 4FF48051 		mov	r1, #4096
 1006 0064 0F48     		ldr	r0, .L44+16
 1007 0066 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 1008              	.LVL107:
 1009              	.L36:
 238:Core/Src/CAN.c **** 	}
 239:Core/Src/CAN.c **** }
 1010              		.loc 1 239 1 is_stmt 0 view .LVU233
 1011 006a 06B0     		add	sp, sp, #24
 1012              	.LCFI23:
 1013              		.cfi_remember_state
 1014              		.cfi_def_cfa_offset 8
 1015              		@ sp needed
 1016 006c 10BD     		pop	{r4, pc}
 1017              	.L42:
 1018              	.LCFI24:
 1019              		.cfi_restore_state
 219:Core/Src/CAN.c **** 		}
 1020              		.loc 1 219 4 is_stmt 1 view .LVU234
 1021 006e 01AB     		add	r3, sp, #4
 1022 0070 0DF10F02 		add	r2, sp, #15
 1023 0074 04A9     		add	r1, sp, #16
 1024 0076 2046     		mov	r0, r4
 1025 0078 FFF7FEFF 		bl	receiveCANMessage
 1026              	.LVL108:
 1027 007c E4E7     		b	.L37
 1028              	.L43:
 231:Core/Src/CAN.c **** 		HAL_GPIO_TogglePin(LED_BLUE_GPIO_Port, LED_BLUE_Pin);
 1029              		.loc 1 231 3 view .LVU235
 231:Core/Src/CAN.c **** 		HAL_GPIO_TogglePin(LED_BLUE_GPIO_Port, LED_BLUE_Pin);
 1030              		.loc 1 231 20 is_stmt 0 view .LVU236
 1031 007e 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 231:Core/Src/CAN.c **** 		HAL_GPIO_TogglePin(LED_BLUE_GPIO_Port, LED_BLUE_Pin);
 1032              		.loc 1 231 14 view .LVU237
 1033 0082 094B     		ldr	r3, .L44+20
 1034 0084 1A70     		strb	r2, [r3]
 232:Core/Src/CAN.c **** 	}
 1035              		.loc 1 232 3 is_stmt 1 view .LVU238
 1036 0086 4FF48061 		mov	r1, #1024
 1037 008a 0648     		ldr	r0, .L44+16
 1038 008c FFF7FEFF 		bl	HAL_GPIO_TogglePin
 1039              	.LVL109:
 1040 0090 EBE7     		b	.L36
 1041              	.L45:
 1042 0092 00BF     		.align	2
 1043              	.L44:
 1044 0094 00000000 		.word	CANInterruptQueue
 1045 0098 00000000 		.word	SPIMutexHandle
 1046 009c CCCCCC0C 		.word	214748364
 1047 00a0 00000000 		.word	greenStatus
 1048 00a4 00080240 		.word	1073874944
 1049 00a8 00000000 		.word	blueStatus
 1050              		.cfi_endproc
 1051              	.LFE83:
 1053              		.text
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 24


 1054              	.Letext0:
 1055              		.file 2 "c:\\st\\stm32cubeide_1.10.1\\stm32cubeide\\plugins\\com.st.stm32cube.ide.mcu.externaltool
 1056              		.file 3 "c:\\st\\stm32cubeide_1.10.1\\stm32cubeide\\plugins\\com.st.stm32cube.ide.mcu.externaltool
 1057              		.file 4 "Drivers/CMSIS/Device/ST/STM32L1xx/Include/stm32l152xe.h"
 1058              		.file 5 "Drivers/STM32L1xx_HAL_Driver/Inc/stm32l1xx_hal_def.h"
 1059              		.file 6 "Drivers/STM32L1xx_HAL_Driver/Inc/stm32l1xx_hal_gpio.h"
 1060              		.file 7 "Drivers/STM32L1xx_HAL_Driver/Inc/stm32l1xx_hal_dma.h"
 1061              		.file 8 "Drivers/STM32L1xx_HAL_Driver/Inc/stm32l1xx_hal_spi.h"
 1062              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 1063              		.file 10 "Core/Inc/CAN.h"
 1064              		.file 11 "Core/Inc/main.h"
ARM GAS  C:\Users\marce\AppData\Local\Temp\ccevmAjg.s 			page 25


DEFINED SYMBOLS
                            *ABS*:0000000000000000 CAN.c
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:18     .text.CAN_IC_READ_REGISTER:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:24     .text.CAN_IC_READ_REGISTER:0000000000000000 CAN_IC_READ_REGISTER
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:94     .text.CAN_IC_READ_REGISTER:000000000000004c $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:100    .text.CAN_IC_WRITE_REGISTER_BITWISE:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:106    .text.CAN_IC_WRITE_REGISTER_BITWISE:0000000000000000 CAN_IC_WRITE_REGISTER_BITWISE
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:164    .text.CAN_IC_WRITE_REGISTER_BITWISE:0000000000000040 $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:170    .text.CAN_IC_WRITE_REGISTER:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:176    .text.CAN_IC_WRITE_REGISTER:0000000000000000 CAN_IC_WRITE_REGISTER
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:231    .text.CAN_IC_WRITE_REGISTER:0000000000000038 $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:237    .text.ConfigureCANSPI:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:243    .text.ConfigureCANSPI:0000000000000000 ConfigureCANSPI
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:344    .text.ConfigureCANSPI:0000000000000084 $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:350    .text.sendCANMessage:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:356    .text.sendCANMessage:0000000000000000 sendCANMessage
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:496    .text.sendCANMessage:0000000000000090 $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:502    .text.sendExtendedCANMessage:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:508    .text.sendExtendedCANMessage:0000000000000000 sendExtendedCANMessage
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:708    .text.sendExtendedCANMessage:0000000000000124 $d
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:714    .text.receiveCANMessage:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:720    .text.receiveCANMessage:0000000000000000 receiveCANMessage
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:918    .text.CANRXInterruptTask:0000000000000000 $t
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:924    .text.CANRXInterruptTask:0000000000000000 CANRXInterruptTask
C:\Users\marce\AppData\Local\Temp\ccevmAjg.s:1044   .text.CANRXInterruptTask:0000000000000094 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
HAL_SPI_Receive
hspi1
osMessageQueueGet
osMutexAcquire
osMutexRelease
HAL_GPIO_TogglePin
CANInterruptQueue
SPIMutexHandle
greenStatus
blueStatus
